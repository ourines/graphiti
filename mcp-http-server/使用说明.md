# GraphiTi MCP 使用说明

## 📁 项目文件结构

```
graphiti/
├── deploy.sh                          # 服务器一键部署脚本
├── docker-compose.prod.yml           # 服务器生产环境配置
└── mcp-http-server/
    ├── README.md                      # NPM 包使用文档（英文）
    ├── SIMPLE_DEPLOY.md              # 部署指南（中英文）
    ├── src/                           # 源代码
    ├── dist/                          # 编译后的代码
    ├── package.json                   # NPM 包配置
    ├── Dockerfile                     # Docker 镜像构建
    └── .dockerignore                  # Docker 构建忽略文件
```

---

## 🚀 使用流程

### 第一步：服务器部署

在你的服务器上运行：

```bash
# 1. 克隆仓库
git clone https://github.com/getzep/graphiti.git
cd graphiti

# 2. 配置环境变量
cat > .env.prod << EOF
OPENAI_API_KEY=your-openai-api-key
NEO4J_PASSWORD=your-secure-password
EOF

# 3. 一键部署
./deploy.sh
```

服务启动后：
- GraphiTi API: `http://localhost:8000`
- Neo4j Browser: `http://localhost:7474`

### 第二步：客户端配置

**Claude Desktop 配置**：

编辑 `~/Library/Application Support/Claude/claude_desktop_config.json`:

```json
{
  "mcpServers": {
    "graphiti": {
      "command": "npx",
      "args": ["-y", "@graphiti/mcp-http"],
      "env": {
        "GRAPHITI_API_URL": "http://your-server:8000"
      }
    }
  }
}
```

重启 Claude Desktop 即可使用。

---

## 📖 详细文档

- **部署指南**：`SIMPLE_DEPLOY.md`
- **NPM 包使用**：`README.md`
- **服务器配置**：`../deploy.sh`

---

## 🛠️ 常用命令

### 服务器管理

```bash
# 查看服务状态
docker-compose -f docker-compose.prod.yml ps

# 查看日志
docker-compose -f docker-compose.prod.yml logs -f

# 重启服务
docker-compose -f docker-compose.prod.yml restart

# 停止服务
docker-compose -f docker-compose.prod.yml down
```

### NPM 包开发

```bash
cd mcp-http-server

# 安装依赖
npm install

# 构建
npm run build

# 发布到 NPM
npm publish --access public
```

---

## ✅ 已清理的文件

已删除冗余文档和脚本：
- ❌ CODE_REVIEW_FIXES.md（开发记录）
- ❌ DEPLOYMENT.md（太复杂，已简化为 SIMPLE_DEPLOY.md）
- ❌ QUICKSTART.md（已整合）
- ❌ TESTING_GUIDE.md（测试文档）
- ❌ TEST_RESULTS.md（测试记录）
- ❌ 所有测试脚本（.sh）
- ❌ ecosystem.config.js（PM2 配置）
- ❌ graphiti-mcp.service（Systemd 配置）
- ❌ nginx.conf（已在文档中说明）

保留核心文件：
- ✅ README.md（NPM 包文档）
- ✅ SIMPLE_DEPLOY.md（部署指南）
- ✅ deploy.sh（部署脚本）
- ✅ docker-compose.prod.yml（服务器配置）

---

## 🎯 快速参考

**服务器端**：
```bash
./deploy.sh  # 一键部署
```

**客户端**：
```bash
npx -y @graphiti/mcp-http  # 连接服务器
```

**Claude Desktop**：
```json
{
  "mcpServers": {
    "graphiti": {
      "command": "npx",
      "args": ["-y", "@graphiti/mcp-http"],
      "env": {
        "GRAPHITI_API_URL": "http://your-server:8000"
      }
    }
  }
}
```

完成！
